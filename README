LEARN ELASTICSEARCH

sudo vi /etc/sysctl.conf
# vm.max_map_count=262144

sudo sysctl -p

docker network create elasticsearch

docker run -d --name elasticsearch --net elastic -p 9200:9200 \
           -it -m 6GB -e "xpack.ml.use_auto_machine_memory_percent=true" \
           -e "xpack.security.enabled=false" elasticsearch:8.17.1

# Get password from container logs

# Reset elastic password
docker exec -it es01 /usr/share/elasticsearch/bin/elasticsearch-reset-password -u elastic

# Create enrollment token to kibana
docker exec -it es01 /usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s kibana

# Copy cacert
docker cp elasticsearch:/usr/share/elasticsearch/config/certs/http_ca.crt .

START KIBANA

docker run -d --name kibana --net elastic \
           -p 5601:5601 kibana:8.17.1

# Update cacert when running spring boot application

echo %JAVA_HOME%

%JAVA_HOME%\lib\security\cacerts

keytool -import -trustcacerts -keystore "%JAVA_HOME%\lib\security\cacerts" ^
        -storepass changeit -noprompt -alias elasticsearch -file http_ca.crt
